{"ast":null,"code":"import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import ElipsisMenu from\"../components/ElipsisMenu\";import elipsis from\"../assets/icon-vertical-ellipsis.svg\";import boardsSlice from\"../redux/boardsSlice\";import Subtask from\"../components/Subtask\";import AddEditTaskModal from\"./AddEditTaskModal\";import DeleteModal from\"./DeleteModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TaskModal(_ref){let{taskIndex,colIndex,setIsTaskModalOpen}=_ref;const dispatch=useDispatch();const[isElipsisMenuOpen,setIsElipsisMenuOpen]=useState(false);const[isDeleteModalOpen,setIsDeleteModalOpen]=useState(false);const boards=useSelector(state=>state.boards);const board=boards.find(board=>board.isActive===true);const columns=board.columns;const col=columns.find((col,i)=>i===colIndex);const task=col.tasks.find((task,i)=>i===taskIndex);const subtasks=task.subtasks;let completed=0;subtasks.forEach(subtask=>{if(subtask.isCompleted){completed++;}});const[status,setStatus]=useState(task.status);const[newColIndex,setNewColIndex]=useState(columns.indexOf(col));const onChange=e=>{setStatus(e.target.value);setNewColIndex(e.target.selectedIndex);};const onClose=e=>{if(e.target!==e.currentTarget){return;}dispatch(boardsSlice.actions.setTaskStatus({taskIndex,colIndex,newColIndex,status}));setIsTaskModalOpen(false);};const onDeleteBtnClick=e=>{if(e.target.textContent===\"Delete\"){dispatch(boardsSlice.actions.deleteTask({taskIndex,colIndex}));setIsTaskModalOpen(false);setIsDeleteModalOpen(false);}else{setIsDeleteModalOpen(false);}};const[isAddTaskModalOpen,setIsAddTaskModalOpen]=useState(false);const setOpenEditModal=()=>{setIsAddTaskModalOpen(true);setIsElipsisMenuOpen(false);};const setOpenDeleteModal=()=>{setIsElipsisMenuOpen(false);setIsDeleteModalOpen(true);};return/*#__PURE__*/_jsxs(\"div\",{onClick:onClose,className:\" fixed right-0 top-0 px-2 py-4 overflow-scroll scrollbar-hide  z-50 left-0 bottom-0 justify-center items-center flex dropdown \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" scrollbar-hide overflow-y-scroll max-h-[95vh]  my-auto  bg-white dark:bg-[#2b2c37] text-black dark:text-white font-bold shadow-md shadow-[#364e7e1a] max-w-md mx-auto  w-full px-8  py-8 rounded-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" relative flex   justify-between w-full items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\" text-lg\",children:task.title}),/*#__PURE__*/_jsx(\"img\",{onClick:()=>{setIsElipsisMenuOpen(prevState=>!prevState);},src:elipsis,alt:\"elipsis\",className:\" cursor-pointer h-6\"}),isElipsisMenuOpen&&/*#__PURE__*/_jsx(ElipsisMenu,{setOpenEditModal:setOpenEditModal,setOpenDeleteModal:setOpenDeleteModal,type:\"Task\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\" text-gray-500 font-[600] tracking-wide text-xs pt-6\",children:task.description}),/*#__PURE__*/_jsxs(\"p\",{className:\" pt-6 text-gray-500 tracking-widest text-sm\",children:[\"Subtasks (\",completed,\" of \",subtasks.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\" mt-3 space-y-2\",children:subtasks.map((subtask,index)=>{return/*#__PURE__*/_jsx(Subtask,{index:index,taskIndex:taskIndex,colIndex:colIndex},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 flex flex-col space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"  text-sm dark:text-white text-gray-500\",children:\"Current Status\"}),/*#__PURE__*/_jsx(\"select\",{className:\" select-status flex-grow px-4 py-2 rounded-md text-sm bg-transparent focus:border-0  border-[1px] border-gray-300 focus:outline-[#635fc7] outline-none\",value:status,onChange:onChange,children:columns.map((col,index)=>/*#__PURE__*/_jsx(\"option\",{className:\"status-options\",children:col.name},index))})]})]}),isDeleteModalOpen&&/*#__PURE__*/_jsx(DeleteModal,{onDeleteBtnClick:onDeleteBtnClick,type:\"task\",title:task.title}),isAddTaskModalOpen&&/*#__PURE__*/_jsx(AddEditTaskModal,{setIsAddTaskModalOpen:setIsAddTaskModalOpen,setIsTaskModalOpen:setIsTaskModalOpen,type:\"edit\",taskIndex:taskIndex,prevColIndex:colIndex})]});}export default TaskModal;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","ElipsisMenu","elipsis","boardsSlice","Subtask","AddEditTaskModal","DeleteModal","jsx","_jsx","jsxs","_jsxs","TaskModal","_ref","taskIndex","colIndex","setIsTaskModalOpen","dispatch","isElipsisMenuOpen","setIsElipsisMenuOpen","isDeleteModalOpen","setIsDeleteModalOpen","boards","state","board","find","isActive","columns","col","i","task","tasks","subtasks","completed","forEach","subtask","isCompleted","status","setStatus","newColIndex","setNewColIndex","indexOf","onChange","e","target","value","selectedIndex","onClose","currentTarget","actions","setTaskStatus","onDeleteBtnClick","textContent","deleteTask","isAddTaskModalOpen","setIsAddTaskModalOpen","setOpenEditModal","setOpenDeleteModal","onClick","className","children","title","prevState","src","alt","type","description","length","map","index","name","prevColIndex"],"sources":["/home/user/React/Todo-Hub/src/modals/TaskModal.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ElipsisMenu from \"../components/ElipsisMenu\";\nimport elipsis from \"../assets/icon-vertical-ellipsis.svg\";\nimport boardsSlice from \"../redux/boardsSlice\";\nimport Subtask from \"../components/Subtask\";\nimport AddEditTaskModal from \"./AddEditTaskModal\";\nimport DeleteModal from \"./DeleteModal\";\n\nfunction TaskModal({ taskIndex, colIndex, setIsTaskModalOpen }) {\n  const dispatch = useDispatch();\n  const [isElipsisMenuOpen, setIsElipsisMenuOpen] = useState(false);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const boards = useSelector((state) => state.boards);\n  const board = boards.find((board) => board.isActive === true);\n  const columns = board.columns;\n  const col = columns.find((col, i) => i === colIndex);\n  const task = col.tasks.find((task, i) => i === taskIndex);\n  const subtasks = task.subtasks;\n\n  let completed = 0;\n  subtasks.forEach((subtask) => {\n    if (subtask.isCompleted) {\n      completed++;\n    }\n  });\n\n  const [status, setStatus] = useState(task.status);\n  const [newColIndex, setNewColIndex] = useState(columns.indexOf(col));\n  const onChange = (e) => {\n    setStatus(e.target.value);\n    setNewColIndex(e.target.selectedIndex);\n  };\n\n  const onClose = (e) => {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n    dispatch(\n      boardsSlice.actions.setTaskStatus({\n        taskIndex,\n        colIndex,\n        newColIndex,\n        status,\n      })\n    );\n    setIsTaskModalOpen(false);\n  };\n\n  const onDeleteBtnClick = (e) => {\n    if (e.target.textContent === \"Delete\") {\n      dispatch(boardsSlice.actions.deleteTask({ taskIndex, colIndex }));\n      setIsTaskModalOpen(false);\n      setIsDeleteModalOpen(false);\n    } else {\n      setIsDeleteModalOpen(false);\n    }\n  };\n\n  const [isAddTaskModalOpen, setIsAddTaskModalOpen] = useState(false);\n\n  const setOpenEditModal = () => {\n    setIsAddTaskModalOpen(true);\n    setIsElipsisMenuOpen(false);\n  };\n\n  const setOpenDeleteModal = () => {\n    setIsElipsisMenuOpen(false);\n    setIsDeleteModalOpen(true);\n  };\n\n  return (\n    <div\n      onClick={onClose}\n      className=\" fixed right-0 top-0 px-2 py-4 overflow-scroll scrollbar-hide  z-50 left-0 bottom-0 justify-center items-center flex dropdown \"\n    >\n      {/* MODAL SECTION */}\n\n      <div className=\" scrollbar-hide overflow-y-scroll max-h-[95vh]  my-auto  bg-white dark:bg-[#2b2c37] text-black dark:text-white font-bold shadow-md shadow-[#364e7e1a] max-w-md mx-auto  w-full px-8  py-8 rounded-xl\">\n        <div className=\" relative flex   justify-between w-full items-center\">\n          <h1 className=\" text-lg\">{task.title}</h1>\n\n          <img\n            onClick={() => {\n              setIsElipsisMenuOpen((prevState) => !prevState);\n            }}\n            src={elipsis}\n            alt=\"elipsis\"\n            className=\" cursor-pointer h-6\"\n          />\n          {isElipsisMenuOpen && (\n            <ElipsisMenu\n              setOpenEditModal={setOpenEditModal}\n              setOpenDeleteModal={setOpenDeleteModal}\n              type=\"Task\"\n            />\n          )}\n        </div>\n        <p className=\" text-gray-500 font-[600] tracking-wide text-xs pt-6\">\n          {task.description}\n        </p>\n\n        <p className=\" pt-6 text-gray-500 tracking-widest text-sm\">\n          Subtasks ({completed} of {subtasks.length})\n        </p>\n\n        {/* subtasks section */}\n\n        <div className=\" mt-3 space-y-2\">\n          {subtasks.map((subtask, index) => {\n            return (\n              <Subtask\n                index={index}\n                taskIndex={taskIndex}\n                colIndex={colIndex}\n                key={index}\n              />\n            );\n          })}\n        </div>\n\n        {/* Current Status Section */}\n\n        <div className=\"mt-8 flex flex-col space-y-3\">\n          <label className=\"  text-sm dark:text-white text-gray-500\">\n            Current Status\n          </label>\n          <select\n            className=\" select-status flex-grow px-4 py-2 rounded-md text-sm bg-transparent focus:border-0  border-[1px] border-gray-300 focus:outline-[#635fc7] outline-none\"\n            value={status}\n            onChange={onChange}\n          >\n            {columns.map((col, index) => (\n              <option className=\"status-options\" key={index}>\n                {col.name}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n      {isDeleteModalOpen && (\n        <DeleteModal\n          onDeleteBtnClick={onDeleteBtnClick}\n          type=\"task\"\n          title={task.title}\n        />\n      )}\n\n      {isAddTaskModalOpen && (\n        <AddEditTaskModal\n          setIsAddTaskModalOpen={setIsAddTaskModalOpen}\n          setIsTaskModalOpen={setIsTaskModalOpen}\n          type=\"edit\"\n          taskIndex={taskIndex}\n          prevColIndex={colIndex}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default TaskModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}